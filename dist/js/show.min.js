define(["header","single","jquery","jquery-cookie"],function(header,single,$){function show(){var id=getUrlParam("id");$(".con_right6 .con_right_r button").eq(0).attr("id",id),$.ajax({type:"get",url:"../data/list.json",success:function(i){if(i){for(var t=0;t<i.length;t++)if(id==i[t].id){for(var e=$("<div class='list_img'></div>"),s=$("<ul></ul>"),n=0;n<i[t].img.length;n++)$("<li><img src='"+i[t].img[n]+"?imageView2/1/w/400/h/400/q/100/' alt="+i[t].title+" title="+i[t].title+"></li>").appendTo(s),$("<img src="+i[t].img[n]+" alt="+i[t].title+" title="+i[t].title+">").appendTo($(".big"));$("<span class='grayBox'></span>").appendTo(s),s.appendTo(e);var o=$("<div class='list_imgx'></div>"),r=$("<ol></ol>");for(n=0;n<i[t].img.length;n++)$("<li><img src='"+i[t].img[n]+"?imageView2/1/w/58/h/58/q/100/' alt="+i[t].title+" title="+i[t].title+"></li>").appendTo(r);r.appendTo(o),$("<span class='prev'>&lt;</span><span class='next'>&gt;</span>").appendTo(o),o.appendTo(e),e.appendTo($(".con_left")),$(".con_right1 h2").html(i[t].title),$(".con_right2 .con_right_r").html("<p>¥  "+i[t].price+"</p><span>市场价：</span><em>¥"+i[t].del+"</em>")}var l=0;$(".list_img ul li").eq(0).show().siblings().hide(),$(".list_imgx ol").on("mouseenter","li",function(){l=$(this).index(),$(this).attr("class","active").siblings().attr("class",""),$(this).parent().parent().prev().find("li").eq(l).show().siblings().hide()}),$(".prev").click(function(){--l<0&&(l=0);var i=($(this).prev().find("li").width()+12)*$(this).prev().find("li").size(),t=$(this).prev().find("li").size()-5,e=parseInt($(this).prev().css("left"));$(this).prev().width(i),l<=t&&e<0&&$(this).prev().stop().animate({left:e+$(this).prev().find("li").width()},500),$(this).prev().find("li").eq(l).attr("class","active").siblings().attr("class",""),$(this).parent().prev().find("li").eq(l).show().siblings().hide()}),$(".next").click(function(){++l>$(this).parent().prev().find("li").size()&&(l=$(this).parent().prev().find("li").size());var i=($(this).prev().prev().find("li").width()+12)*$(this).prev().prev().find("li").size();$(this).prev().prev().width(i),5<=l&&$(this).prev().prev().stop().animate({left:-$(this).prev().prev().find("li").width()},500),$(this).prev().prev().find("li").eq(l).attr("class","active").siblings().attr("class",""),$(this).parent().prev().find("li").eq(l).show().siblings().hide()}),$(".con_left .list_img ul").mouseenter(function(){$(".big").show(),$(".grayBox").show()}),$(".con_left .list_img ul").mousemove(function(i){var t=i.pageX-$(this).offset().left,e=i.pageY-$(this).offset().top,s=t-$(".grayBox").width()/2,n=e-$(".grayBox").height()/2,o=0;$(".con_left .list_img ul li").each(function(){"none"!=$(this).css("display")&&(o=$(this).index())}),$(".big img").eq(o).show().siblings().hide(),s=s<=0?0:s,n<=0&&(n=0);var r=parseInt($(".con_left .list_img ul").width())-parseInt($(".con_left .list_img ul .grayBox").width()),l=parseInt($(".con_left .list_img ul").height())-parseInt($(".con_left .list_img ul .grayBox").height());s=r<=s?r:s,l<=n&&(n=l),$(".grayBox").css("left",s),$(".grayBox").css("top",n);var a=Math.round(s/r*100)/100,h=Math.round(n/l*100)/100,c=$(".big img").width()-$(".big").width();$(".big img").css("left",-c*a);var p=$(".big img").height()-$(".big").height();$(".big img").css("top",-p*h)}).mouseleave(function(){$(".big").hide(),$(".grayBox").hide()})}},error:function(i){console.log(i)}}),$(".con_right4 ul li").click(function(){$(this).addClass("active").siblings().removeClass("active")}),$.ajax({type:"get",url:"../data/list.json",success:function(i){if(i)for(var t=0;t<i.length;t++)t<8&&$("<dd><a href="+i[t].url+"?id="+i[t].id+"><img src="+i[t].img[0]+" alt="+i[t].title+"><p>"+i[t].title+"</p><span>"+i[t].price+"</span></a></dd>").appendTo($("#hotList"))},error:function(i){console.log(i)}}),$(".show_tab li").click(function(){$(this).attr("class","active").siblings().attr("class",""),$(".content .content_show").eq($(this).index()).show().siblings().hide()}),$(".con_right6 .con_right_r button").eq(0).click(function(){var id=this.id,first=null==$.cookie("goods");if(first)$.cookie("goods","[{id:"+id+",num:"+parseInt($("#shopNum").val())+"}]",{expires:7,path:"/"});else{for(var cookieStr=$.cookie("goods"),cookieArr=eval(cookieStr),isSame=!1,i=0;i<cookieArr.length;i++)if(cookieArr[i].id==id){1<$("#shopNum").val()?cookieArr[i].num+=parseInt($("#shopNum").val()):cookieArr[i].num++,isSame=!0;break}if(!isSame){var obj={id:id,num:parseInt($("#shopNum").val())};cookieArr.push(obj)}$.cookie("goods",JSON.stringify(cookieArr),{expires:7,path:"/"})}header.shopCar(),single.single()})}function getUrlParam(i){var t=new RegExp("(^|&)"+i+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(t);return null!=e?unescape(e[2]):null}return{show:show}});